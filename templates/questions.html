<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–û–ø—Ä–æ—Å–Ω–∏–∫</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        width: 100%;
        max-width: 800px;
      }

      .quiz-box {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 50px 40px;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3),
          0 0 40px rgba(255, 215, 0, 0.2), 0 0 60px rgba(255, 215, 0, 0.1),
          0 8px 32px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
      }

      .quiz-box::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #ffd700, #ffa500, #ffd700, #ffa500);
        border-radius: 20px;
        z-index: -1;
        animation: glow 3s ease-in-out infinite;
        opacity: 0.6;
      }

      @keyframes glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(255, 215, 0, 0.5),
            0 0 40px rgba(255, 215, 0, 0.3), 0 0 60px rgba(255, 215, 0, 0.2);
        }
        50% {
          box-shadow: 0 0 30px rgba(255, 215, 0, 0.7),
            0 0 60px rgba(255, 215, 0, 0.5), 0 0 90px rgba(255, 215, 0, 0.3);
        }
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
      }

      h2 {
        color: #2d2d2d;
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 10px;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.3),
          0 0 20px rgba(255, 215, 0, 0.2);
      }

      .subtitle {
        color: #666;
        font-size: 14px;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 10px;
        margin-bottom: 30px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #ffd700, #ffa500);
        border-radius: 10px;
        transition: width 0.3s ease;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5),
          0 0 20px rgba(255, 215, 0, 0.3);
      }

      .question-container {
        display: none;
      }

      .question-container.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .question-number {
        color: #ffd700;
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 15px;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      }

      .question-text {
        color: #2d2d2d;
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 25px;
        line-height: 1.5;
      }

      .options {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .option {
        padding: 18px 20px;
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: #333;
        font-size: 15px;
        line-height: 1.6;
      }

      .option:hover {
        border-color: #ffd700;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.2),
          0 0 30px rgba(255, 215, 0, 0.1);
        transform: translateX(5px);
      }

      .option.selected {
        background: linear-gradient(
          135deg,
          rgba(255, 215, 0, 0.1),
          rgba(255, 165, 0, 0.1)
        );
        border-color: #ffd700;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3),
          0 0 40px rgba(255, 215, 0, 0.2);
      }

      .navigation {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
        gap: 15px;
      }

      .btn {
        padding: 14px 30px;
        border: none;
        border-radius: 12px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .btn-prev {
        background: white;
        color: #333;
        border: 2px solid #e0e0e0;
      }

      .btn-prev:hover:not(:disabled) {
        border-color: #ffd700;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.2),
          0 0 30px rgba(255, 215, 0, 0.1);
      }

      .btn-next {
        background: linear-gradient(135deg, #ffd700 0%, #ffa500 100%);
        color: #1a1a1a;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4),
          0 0 40px rgba(255, 215, 0, 0.2), 0 4px 15px rgba(255, 165, 0, 0.3);
        flex: 1;
      }

      .btn-next:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.6),
          0 0 60px rgba(255, 215, 0, 0.4), 0 6px 20px rgba(255, 165, 0, 0.4);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .main-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3),
          0 0 40px rgba(255, 215, 0, 0.2), 0 0 60px rgba(255, 215, 0, 0.1),
          0 8px 32px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        padding: 15px 0;
      }

      .header-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
      }

      .logo {
        font-size: 24px;
        font-weight: 700;
        color: #2d2d2d;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo::before {
        content: "üéØ";
        font-size: 28px;
      }

      .nav-menu {
        display: flex;
        gap: 20px;
      }

      .nav-link {
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 25px;
        text-decoration: none;
        color: #2d2d2d;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
      }

      .nav-link::before {
        content: "";
        position: absolute;
        top: -1px;
        left: -1px;
        right: -1px;
        bottom: -1px;
        background: linear-gradient(45deg, #ffd700, #ffa500);
        border-radius: 25px;
        z-index: -1;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .nav-link:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4),
          0 0 40px rgba(255, 215, 0, 0.2);
      }

      .nav-link:hover::before {
        opacity: 0.3;
      }

      .nav-link.active {
        background: linear-gradient(135deg, #ffd700, #ffa500);
        color: #1a1a1a;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.5),
          0 0 30px rgba(255, 215, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <header class="main-header">
      <div class="header-container">
        <a href="/" class="logo">CareerGuide</a>
        <nav class="nav-menu">
          <a href="/questions/?user_id={{ user_id }}" class="nav-link">–¢–µ—Å—Ç</a>
          <a href="/results?user_id={{ user_id }}" class="nav-link"
            >–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</a
          >
          <a href="/chat_bot?user_id={{ user_id }}" class="nav-link">–ß–∞—Ç-–±–æ—Ç</a>
          <a href="/histories?user_id={{ user_id }}" class="nav-link"
            >–ò—Å—Ç–æ—Ä–∏—è</a
          >
        </nav>
      </div>
    </header>
    <div class="container">
      <div class="quiz-box">
        <div class="header">
          <h2>–û–ø—Ä–æ—Å–Ω–∏–∫</h2>
          <p class="subtitle">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å–≤–æ–π —Ç–∏–ø</p>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>

        <div id="quizContent"></div>
      </div>
    </div>

    <script>
      const questions = [
        {
          question: "–ß—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ –¥–µ–ª–∞—Ç—å –≤ –∫–æ–º–ø–∞–Ω–∏–∏?",
          options: [
            { text: "–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∏–≥—Ä—É –∏–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.", type: "A" },
            { text: "–ó–Ω–∞–∫–æ–º–∏—Ç—å –ª—é–¥–µ–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–µ—Å–µ–¥—É.", type: "B" },
            { text: "–ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –æ–±—â—É—é –∏–¥–µ—é –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.", type: "C" },
            { text: "–†–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–¥–∞—á–∏ –∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Ä–µ–º–µ–Ω–µ–º.", type: "D" },
          ],
        },
        {
          question: "–ö–∞–∫–æ–π –æ—Ç–¥—ã—Ö –¥–ª—è —Ç–µ–±—è –∏–¥–µ–∞–ª–µ–Ω?",
          options: [
            { text: "–ü–æ—Ö–æ–¥ —Å –ø–∞–ª–∞—Ç–∫–æ–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∑–∞–±–µ–≥.", type: "A" },
            { text: "–ë–æ–ª—å—à–∞—è –≤–µ—á–µ—Ä–∏–Ω–∫–∞ –∏–ª–∏ –ø–æ—Å–∏–¥–µ–ª–∫–∏ —Å –¥—Ä—É–∑—å—è–º–∏.", type: "B" },
            {
              text: "–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é –∏–ª–∏ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç.",
              type: "C",
            },
            {
              text: "–°–ø–æ–∫–æ–π–Ω—ã–π –≤–µ—á–µ—Ä –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –±—É–¥—É—â–µ–π –ø–æ–µ–∑–¥–∫–∏.",
              type: "D",
            },
          ],
        },
        {
          question: "–¢–≤–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º—ã?",
          options: [
            { text: "–°—Ä–∞–∑—É –ø—Ä–æ–±—É—é —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.", type: "A" },
            {
              text: "–û–±—Å—É–∂–¥–∞—é —Å –∫–µ–º-—Ç–æ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ.",
              type: "B",
            },
            { text: "–ò—â—É –Ω–µ–æ–±—ã—á–Ω—ã–π, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–±.", type: "C" },
            {
              text: "–°–æ—Å—Ç–∞–≤–ª—è—é –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.",
              type: "D",
            },
          ],
        },
        {
          question: "–ö–∞–∫—É—é –∫–Ω–∏–≥—É –∏–ª–∏ —Ñ–∏–ª—å–º —Ç—ã –≤—ã–±–µ—Ä–µ—à—å?",
          options: [
            {
              text: "–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è, —Å–ø–æ—Ä—Ç, –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª–∏—Å—Ç–∏–∫–∞ –æ –ø—Ä–∏—Ä–æ–¥–µ.",
              type: "A",
            },
            {
              text: "–î—Ä–∞–º–∞, —Ä–æ–º–∞–Ω—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏.",
              type: "B",
            },
            { text: "–§—ç–Ω—Ç–µ–∑–∏, –Ω–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞, –∞—Ä—Ç-—Ö–∞—É—Å.", type: "C" },
            {
              text: "–î–µ—Ç–µ–∫—Ç–∏–≤, –±–∏–∑–Ω–µ—Å-–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Ö—Ä–æ–Ω–∏–∫–∞.",
              type: "D",
            },
          ],
        },
        {
          question: "–ß—Ç–æ –≤–∞–∂–Ω–µ–µ –≤ —Ä–∞–±–æ—Ç–µ?",
          options: [
            {
              text: "–í–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π, –æ—Å—è–∑–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–≥–æ —Ç—Ä—É–¥–∞.",
              type: "A",
            },
            {
              text: "–ü–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º, –æ–±—â–∞—Ç—å—Å—è, —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ.",
              type: "B",
            },
            {
              text: "–ò–º–µ—Ç—å —Å–≤–æ–±–æ–¥—É –¥–ª—è —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.",
              type: "C",
            },
            {
              text: "–ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ–Ω—è—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–∞—Ä—å–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç.",
              type: "D",
            },
          ],
        },
        {
          question:
            "–ï—Å–ª–∏ –±—ã —Ç—ã –ø–æ–ª—É—á–∏–ª(-–∞) –±–æ–ª—å—à—É—é —Å—É–º–º—É –¥–µ–Ω–µ–≥, —á—Ç–æ —Å–¥–µ–ª–∞–ª(-–∞) –±—ã –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å?",
          options: [
            {
              text: "–ö—É–ø–∏–ª(-–∞) —á—Ç–æ-—Ç–æ –¥–ª—è —Ö–æ–±–±–∏ (–≤–µ–ª–æ—Å–∏–ø–µ–¥, –≥–∏—Ç–∞—Ä—É) –∏–ª–∏ –ø–æ–µ—Ö–∞–ª(-–∞) –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä.",
              type: "A",
            },
            {
              text: "–£—Å—Ç—Ä–æ–∏–ª(-–∞) –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω—É—é –≤–µ—á–µ—Ä–∏–Ω–∫—É –¥–ª—è –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π.",
              type: "B",
            },
            {
              text: "–í–ª–æ–∂–∏–ª(-–∞) –≤ —Å–≤–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç.",
              type: "C",
            },
            {
              text: "–û—Ç–∫—Ä—ã–ª(-–∞) –≤–∫–ª–∞–¥ –≤ –±–∞–Ω–∫–µ –∏–ª–∏ —Å–æ—Å—Ç–∞–≤–∏–ª(-–∞) —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–ª–∞–Ω.",
              type: "D",
            },
          ],
        },
        {
          question: "–ö–∞–∫ —Ç—ã —É—á–∏—à—å—Å—è —á–µ–º—É-—Ç–æ –Ω–æ–≤–æ–º—É?",
          options: [
            { text: "–°—Ä–∞–∑—É –ø—Ä–æ–±—É—é –¥–µ–ª–∞—Ç—å, —É—á—É—Å—å –Ω–∞ —Å–≤–æ–∏—Ö –æ—à–∏–±–∫–∞—Ö.", type: "A" },
            {
              text: "–ó–∞–ø–∏—Å—ã–≤–∞—é—Å—å –Ω–∞ –∫—É—Ä—Å—ã –≤ –≥—Ä—É–ø–ø–µ, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–µ—Å–µ–ª–µ–µ.",
              type: "B",
            },
            { text: "–ò—â—É –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É—é.", type: "C" },
            {
              text: "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, —Å–æ—Å—Ç–∞–≤–ª—è—é –∫–æ–Ω—Å–ø–µ–∫—Ç.",
              type: "D",
            },
          ],
        },
        {
          question: "–ß—Ç–æ —Ç–µ–±—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç?",
          options: [
            { text: "–°–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥—É—Ö, –∂–µ–ª–∞–Ω–∏–µ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º.", type: "A" },
            { text: "–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –æ—Ç –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.", type: "B" },
            { text: "–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å —á—Ç–æ-—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ.", type: "C" },
            {
              text: "–ß–µ—Ç–∫–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è —Ü–µ–ª—å –∏ –ø–ª–∞–Ω –ø–æ –µ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é.",
              type: "D",
            },
          ],
        },
        {
          question: "–¢–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —É—á–µ–±–µ?",
          options: [
            { text: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã, —Ñ–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, —á–µ—Ä—á–µ–Ω–∏–µ.", type: "A" },
            {
              text: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π, –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, –¥–µ–±–∞—Ç—ã.",
              type: "B",
            },
            {
              text: "–°–æ—á–∏–Ω–µ–Ω–∏—è, –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤—É, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏.",
              type: "C",
            },
            {
              text: "–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∞–º.",
              type: "D",
            },
          ],
        },
        {
          question: "–ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –ø—Ä–∞–≤–∏–ª–∞–º?",
          options: [
            {
              text: "–°—á–∏—Ç–∞—é –∏—Ö –Ω—É–∂–Ω—ã–º–∏, –Ω–æ –ª—é–±–ª—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å.",
              type: "A",
            },
            { text: "–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–∂–Ω—ã –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è.", type: "B" },
            {
              text: "–ß–∞—Å—Ç–æ –≤–∏–∂—É, –∫–∞–∫ –∏—Ö –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –∏–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—å —Ä–∞–¥–∏ –∏–¥–µ–∏.",
              type: "C",
            },
            {
              text: "–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏—Ö —Å–æ–±–ª—é–¥–∞—Ç—å. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –ø–æ—Ä—è–¥–∫–∞.",
              type: "D",
            },
          ],
        },
        {
          question: "–ß—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ –≤ –Ω–æ–≤–æ—Å—Ç—è—Ö?",
          options: [
            { text: "–ù–æ–≤–æ—Å—Ç–∏ —Å–ø–æ—Ä—Ç–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è.", type: "A" },
            { text: "–°–≤–µ—Ç—Å–∫–∞—è —Ö—Ä–æ–Ω–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏–∏ –æ –ª—é–¥—è—Ö.", type: "B" },
            {
              text: "–ê–Ω–æ–Ω—Å—ã –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –Ω–æ–≤—ã–µ —Ñ–∏–ª—å–º—ã –∏ –º—É–∑—ã–∫–∞.",
              type: "C",
            },
            { text: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏.", type: "D" },
          ],
        },
        {
          question: "–¢–≤–æ—è —Ä–æ–ª—å –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ?",
          options: [
            {
              text: "–¢–æ—Ç, –∫—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∞–º—É—é —Å–ª–æ–∂–Ω—É—é –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç—å.",
              type: "A",
            },
            {
              text: "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ—Ö –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç.",
              type: "B",
            },
            { text: "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –∏ –¥–∏–∑–∞–π–Ω–µ—Ä.", type: "C" },
            { text: "–°–æ—Å—Ç–∞–≤–∏—Ç–µ–ª—å –ø–ª–∞–Ω–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ —Å—Ä–æ–∫–∏.", type: "D" },
          ],
        },
        {
          question: "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–µ–µ –≤ –æ–±—â–µ–Ω–∏–∏?",
          options: [
            { text: "–î–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –≤–º–µ—Å—Ç–µ, –∞ –Ω–µ –º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç—å.", type: "A" },
            { text: "–ü–æ–ª—É—á–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É.", type: "B" },
            {
              text: "–û–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–º–∏ –∏–¥–µ—è–º–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å.",
              type: "C",
            },
            {
              text: "–û–±—Å—É–∂–¥–∞—Ç—å —Ñ–∞–∫—Ç—ã –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∫ –ª–æ–≥–∏—á–Ω–æ–º—É –≤—ã–≤–æ–¥—É.",
              type: "D",
            },
          ],
        },
        {
          question: "–ö–∞–∫ —Ç—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º?",
          options: [
            { text: "–ò–¥—É –Ω–∞ –ø—Ä–æ–±–µ–∂–∫—É –∏–ª–∏ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª.", type: "A" },
            {
              text: "–í—Å—Ç—Ä–µ—á–∞—é—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∏–º –æ –ø—Ä–æ–±–ª–µ–º–µ.",
              type: "B",
            },
            {
              text: "–ó–∞–Ω–∏–º–∞—é—Å—å —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ–º (–º—É–∑—ã–∫–∞, —Ä–∏—Å–æ–≤–∞–Ω–∏–µ, –ø–∏—Å—å–º–æ).",
              type: "C",
            },
            { text: "–°–æ—Å—Ç–∞–≤–ª—è—é –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π.", type: "D" },
          ],
        },
        {
          question: "–ö–∞–∫–æ–π –≥–∞–¥–∂–µ—Ç —Ç–µ–±–µ –±–ª–∏–∂–µ?",
          options: [
            {
              text: "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä –∏–ª–∏ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–¥—Ä–µ–ª—å, –º—è—Å–æ—Ä—É–±–∫–∞).",
              type: "A",
            },
            {
              text: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞ –¥–ª—è —Å–µ–ª—Ñ–∏ –∏ –≤–∏–¥–µ–æ-–∑–≤–æ–Ω–∫–æ–≤.",
              type: "B",
            },
            {
              text: "–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω—à–µ—Ç –∏–ª–∏ –º–æ—â–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.",
              type: "C",
            },
            {
              text: "–û—Ä–≥–∞–Ω–∞–π–∑–µ—Ä –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤.",
              type: "D",
            },
          ],
        },
        {
          question: "–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª(-–∞) —É–ª—É—á—à–∏—Ç—å –≤ –º–∏—Ä–µ?",
          options: [
            { text: "–°–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—á–Ω—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –≤–µ—â–∏.", type: "A" },
            { text: "–ù–∞—É—á–∏—Ç—å –ª—é–¥–µ–π –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞.", type: "B" },
            { text: "–°–¥–µ–ª–∞—Ç—å –º–∏—Ä –∫—Ä–∞—Å–∏–≤–µ–µ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–µ.", type: "C" },
            {
              text: "–°–¥–µ–ª–∞—Ç—å —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏.",
              type: "D",
            },
          ],
        },
        {
          question: "–ö–∞–∫–∏–º –±—ã–ª —Ç–≤–æ–π –ª—é–±–∏–º—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ —à–∫–æ–ª–µ?",
          options: [
            { text: "–§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, —Ç—Ä—É–¥, —á–µ—Ä—á–µ–Ω–∏–µ.", type: "A" },
            { text: "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, –∏—Å—Ç–æ—Ä–∏—è, –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ.", type: "B" },
            { text: "–ú—É–∑—ã–∫–∞, –ò–ó–û, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞.", type: "C" },
            { text: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —Ñ–∏–∑–∏–∫–∞, —ç–∫–æ–Ω–æ–º–∏–∫–∞.", type: "D" },
          ],
        },
        {
          question: "–ö–µ–º —Ç—ã –±—ã–ª(-–∞) –≤ —à–∫–æ–ª—å–Ω—ã–µ –≥–æ–¥—ã –≤ –≥—Ä—É–ø–ø–µ –¥—Ä—É–∑–µ–π?",
          options: [
            { text: "–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º –ø–æ–¥–≤–∏–∂–Ω—ã—Ö –∏–≥—Ä.", type: "A" },
            { text: "–î—É—à–æ–π –∫–æ–º–ø–∞–Ω–∏–∏, —Ç–µ–º, –∫—Ç–æ –≤—Å–µ—Ö –º–∏—Ä–∏—Ç.", type: "B" },
            { text: "–°–∞–º—ã–º –Ω–µ–æ–±—ã—á–Ω—ã–º, –≤—ã–¥—É–º—â–∏–∫–æ–º.", type: "C" },
            {
              text: "–ì–æ–ª–æ—Å–æ–º —Ä–∞–∑—É–º–∞, –∫—Ç–æ –≤—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏—Ç –æ –¥–µ–¥–ª–∞–π–Ω–∞—Ö.",
              type: "D",
            },
          ],
        },
        {
          question: '–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç "—É—Å–ø–µ—Ö"?',
          options: [
            {
              text: "–ü–æ–±–∏—Ç—å —Å–≤–æ–π —Ä–µ–∫–æ—Ä–¥, –¥–æ—Å—Ç–∏—á—å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ –≤ –¥–µ–ª–µ.",
              type: "A",
            },
            { text: "–ë—ã—Ç—å –æ–∫—Ä—É–∂–µ–Ω–Ω—ã–º –≤–µ—Ä–Ω—ã–º–∏ –¥—Ä—É–∑—å—è–º–∏ –∏ —Å–µ–º—å–µ–π.", type: "B" },
            {
              text: "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –∑–∞–º—ã—Å–µ–ª.",
              type: "C",
            },
            { text: "–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é –∏ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –∂–∏–∑–Ω—å.", type: "D" },
          ],
        },
        {
          question:
            "–ù–∞ —á—Ç–æ —Ç—ã –æ–±—Ä–∞—â–∞–µ—à—å –≤–Ω–∏–º–∞–Ω–∏–µ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –∑–Ω–∞–∫–æ–º—è—Å—å —Å –Ω–æ–≤—ã–º —á–µ–ª–æ–≤–µ–∫–æ–º?",
          options: [
            { text: "–ù–∞ –µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—é, –æ—Å–∞–Ω–∫—É.", type: "A" },
            {
              text: "–ù–∞ –µ–≥–æ –º–∞–Ω–µ—Ä—É –æ–±—â–µ–Ω–∏—è, —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞, –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å.",
              type: "B",
            },
            {
              text: "–ù–∞ –µ–≥–æ —Å—Ç–∏–ª—å, –Ω–µ–æ–±—ã—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥.",
              type: "C",
            },
            {
              text: "–ù–∞ –µ–≥–æ –ª–æ–≥–∏–∫—É, –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å —Ä–µ—á–∏, —É–º–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.",
              type: "D",
            },
          ],
        },
      ];

      let currentQuestion = 0;
      let answers = { A: 0, B: 0, C: 0, D: 0 };
      let userAnswers = Array(questions.length).fill(null);

      async function loadProgressFromServer(userId) {
        try {
          const response = await fetch(`/get_quiz_progress?user_id=${userId}`);
          if (response.ok) {
            const progress = await response.json();
            if (progress) {
              currentQuestion = progress.current_question || 0;
              answers = progress.answers || { A: 0, B: 0, C: 0, D: 0 };
              userAnswers =
                progress.user_answers || Array(questions.length).fill(null);

              // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç—ã –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö
              questions.forEach((q, idx) => {
                if (userAnswers[idx]) {
                  q.selectedAnswer = userAnswers[idx];
                }
              });
            }
          }
        } catch (error) {
          console.error("Error loading progress:", error);
        }

        renderQuestion();
      }

      async function saveProgressToServer() {
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("user_id");

        if (userId) {
          try {
            const progressData = {
              current_question: currentQuestion,
              answers: answers,
              user_answers: userAnswers,
            };

            await fetch("/save_quiz_progress?user_id=" + userId, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(progressData),
            });
          } catch (error) {
            console.error("Error saving progress:", error);
          }
        }
      }

      function renderQuestion() {
        const content = document.getElementById("quizContent");
        const question = questions[currentQuestion];

        content.innerHTML = `
              <div class="question-container active">
                  <div class="question-number">–í–æ–ø—Ä–æ—Å ${
                    currentQuestion + 1
                  } –∏–∑ ${questions.length}</div>
                  <div class="question-text">${question.question}</div>
                  <div class="options">
                      ${question.options
                        .map(
                          (opt, idx) => `
                          <div class="option ${
                            question.selectedAnswer === opt.type
                              ? "selected"
                              : ""
                          }"
                               onclick="selectOption(${idx}, '${opt.type}')">
                              ${opt.text}
                          </div>
                      `
                        )
                        .join("")}
                  </div>
                  <div class="navigation">
                      <button class="btn btn-prev" onclick="prevQuestion()" ${
                        currentQuestion === 0 ? "disabled" : ""
                      }>
                          –ù–∞–∑–∞–¥
                      </button>
                      <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()" ${
                        !question.selectedAnswer ? "disabled" : ""
                      }>
                          ${
                            currentQuestion === questions.length - 1
                              ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
                              : "–î–∞–ª–µ–µ"
                          }
                      </button>
                  </div>
              </div>
          `;

        updateProgress();
      }

      function selectOption(index, type) {
        const options = document.querySelectorAll(".option");
        options.forEach((opt) => opt.classList.remove("selected"));
        options[index].classList.add("selected");

        const question = questions[currentQuestion];

        // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç –∏–∑ –ø–æ–¥—Å—á–µ—Ç–∞
        if (question.selectedAnswer && question.selectedAnswer !== type) {
          answers[question.selectedAnswer]--;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç
        question.selectedAnswer = type;
        answers[type]++;
        userAnswers[currentQuestion] = type;

        document.getElementById("nextBtn").disabled = false;
        saveProgressToServer();
      }

      async function nextQuestion() {
        const question = questions[currentQuestion];
        if (!question.selectedAnswer) return;

        if (currentQuestion < questions.length - 1) {
          currentQuestion++;
          await saveProgressToServer();
          renderQuestion();
        } else {
          try {
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get("user_id");

            console.log("Final answers:", answers);

            const response = await fetch("/process_results?user_id=" + userId, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(answers),
            });

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Received data:", data);

            window.location.href = `/results?user_id=${userId}`;
          } catch (error) {
            console.error("Error:", error);
            window.location.href = `/results?user_id=${userId}`;
          }
        }
      }

      async function prevQuestion() {
        if (currentQuestion > 0) {
          const currentQ = questions[currentQuestion];
          const prevQ = questions[currentQuestion - 1];

          // –£–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π –æ—Ç–≤–µ—Ç –∏–∑ –ø–æ–¥—Å—á–µ—Ç–∞
          if (currentQ.selectedAnswer) {
            answers[currentQ.selectedAnswer]--;
            currentQ.selectedAnswer = null;
          }

          currentQuestion--;

          // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç –≤ –ø–æ–¥—Å—á–µ—Ç–µ
          if (prevQ.selectedAnswer) {
            answers[prevQ.selectedAnswer]++;
          }

          await saveProgressToServer();
          renderQuestion();
        }
      }
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é showResultsPage
      function showResultsPage(data) {
        const hasImage =
          data.image && data.image.startsWith("data:image/png;base64");
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("user_id");

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏–π —Ç–∏–ø –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
        const dominantType = getDominantType(data.results);
        let redirectUrl = "/A";
        if (dominantType.includes("–ö–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä"))
          redirectUrl = "/B";
        if (dominantType.includes("–¢–≤–æ—Ä–µ—Ü-–∏–Ω–æ–≤–∞—Ç–æ—Ä")) redirectUrl = "/C";
        if (dominantType.includes("–ê–Ω–∞–ª–∏—Ç–∏–∫-—Å—Ç—Ä–∞—Ç–µ–≥")) redirectUrl = "/D";

        const content = document.getElementById("quizContent");
        content.innerHTML = `
              <div class="question-container active">
                  <div class="question-number">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</div>
                  <div class="question-text">–í–∞—à –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø</div>

                  ${
                    hasImage
                      ? `
                      <div style="text-align: center; margin: 30px 0;">
                          <img src="${data.image}" alt="–ì—Ä–∞—Ñ–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"
                               style="max-width: 100%; max-height: 400px; border-radius: 15px;
                                      box-shadow: 0 8px 25px rgba(0,0,0,0.15); border: 3px solid #ffd700;">
                      </div>
                  `
                      : `
                      <div style="text-align: center; margin: 20px 0; color: #ff6b6b;">
                          <p>‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫, –Ω–æ –≤–æ—Ç –≤–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</p>
                      </div>
                  `
                  }

                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 25px 0;">
                      <div class="result-type" style="background: linear-gradient(135deg, rgba(255,107,107,0.15), rgba(255,107,107,0.25)); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #FF6B6B;">
                          <div style="font-weight: bold; color: #FF6B6B; font-size: 16px; margin-bottom: 8px;">–ü—Ä–∞–∫—Ç–∏–∫-–¥–µ—è—Ç–µ–ª—å</div>
                          <div style="font-size: 28px; font-weight: bold; color: #FF6B6B;">${
                            data.results.A
                          }</div>
                          <div style="font-size: 12px; color: #666; margin-top: 5px;">–¢–µ–±–µ –≤–∞–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–≤–æ–∏—Ö —É—Å–∏–ª–∏–π, —Ç—ã —ç–Ω–µ—Ä–≥–∏—á–µ–Ω –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ. –ù–µ –±–æ–∏—à—å—Å—è —Ñ–∏–∑. —Ç—Ä—É–¥–∞ –∏ –ª—é–±–∏—à—å, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞ –∫–∏–ø–∏—Ç.</div>
                      </div>
                      <div class="result-type" style="background: linear-gradient(135deg, rgba(78,205,196,0.15), rgba(78,205,196,0.25)); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #4ECDC4;">
                          <div style="font-weight: bold; color: #4ECDC4; font-size: 16px; margin-bottom: 8px;">–ö–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</div>
                          <div style="font-size: 28px; font-weight: bold; color: #4ECDC4;">${
                            data.results.B
                          }</div>
                          <div style="font-size: 12px; color: #666; margin-top: 5px;">–¢—ã - –º–∞—Å—Ç–µ—Ä –æ–±—â–µ–Ω–∏—è. –¢–µ–±–µ –ª–µ–≥–∫–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –æ–±—â–∏–π —è–∑—ã–∫ —Å –ª—é–¥—å–º–∏, —Ç—ã —É–º–µ–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å, —É–±–µ–∂–¥–∞—Ç—å –∏ –ø–æ–º–æ–≥–∞—Ç—å. –†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ - —Ç–≤–æ—è —Å—Ç–∏—Ö–∏—è.</div>
                      </div>
                      <div class="result-type" style="background: linear-gradient(135deg, rgba(69,183,209,0.15), rgba(69,183,209,0.25)); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #45B7D1;">
                          <div style="font-weight: bold; color: #45B7D1; font-size: 16px; margin-bottom: 8px;">–¢–≤–æ—Ä–µ—Ü-–∏–Ω–æ–≤–∞—Ç–æ—Ä</div>
                          <div style="font-size: 28px; font-weight: bold; color: #45B7D1;">${
                            data.results.C
                          }</div>
                          <div style="font-size: 12px; color: #666; margin-top: 5px;">–¢—ã –æ–±–ª–∞–¥–∞–µ—à—å —è—Ä–∫–∏–º –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –º—ã—à–ª–µ–Ω–∏–µ–º. –¢–µ–±–µ –≤–∞–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ, –≤—ã—Ä–∞–∂–∞—Ç—å —Å–≤–æ–∏ –∏–¥–µ–∏ –∏ –º–µ–Ω—è—Ç—å –º–∏—Ä –≤–æ–∫—Ä—É–≥ —á–µ—Ä–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏</div>
                      </div>
                      <div class="result-type" style="background: linear-gradient(135deg, rgba(150,206,180,0.15), rgba(150,206,180,0.25)); padding: 20px; border-radius: 12px; text-align: center; border: 2px solid #96CEB4;">
                          <div style="font-weight: bold; color: #96CEB4; font-size: 16px; margin-bottom: 8px;">–ê–Ω–∞–ª–∏—Ç–∏–∫-—Å—Ç—Ä–∞—Ç–µ–≥</div>
                          <div style="font-size: 28px; font-weight: bold; color: #96CEB4;">${
                            data.results.D
                          }</div>
                          <div style="font-size: 12px; color: #666; margin-top: 5px;">–¢—ã - –ª–æ–≥–∏–∫ –∏ —Å—Ç—Ä–∞—Ç–µ–≥. –¢–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, —Ü–∏—Ñ—Ä–∞–º–∏ –∏ —Å—Ö–µ–º–∞–º–∏. –¢—ã —Ü–µ–Ω–∏—à—å –ø–æ—Ä—è–¥–æ–∫, —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ª—é–±–∏—à—å –¥–æ–∫–∞–ø—ã–≤–∞—Ç—å—Å—è –¥–æ —Å—É—Ç–∏ –≤–µ—â–∏.</div>
                      </div>
                  </div>

                  <div style="background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,165,0,0.1)); padding: 20px; border-radius: 12px; margin: 20px 0; border-left: 4px solid #ffd700;">
                      <div style="font-weight: bold; color: #2d2d2d; margin-bottom: 10px;">üìà –í–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø:</div>
                      <div style="font-size: 18px; font-weight: bold; color: #ffa500;">
                          ${getDominantType(data.results)}
                      </div>
                  </div>

                  <div class="navigation">
                      <button class="btn btn-prev" onclick="location.reload()" style="flex: 1;">
                          üîÑ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ
                      </button>
                      <button class="btn btn-next" onclick="window.location.href='${redirectUrl}?user_id=${userId}'" style="flex: 1;">
                          üéØ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
                      </button>
                  </div>
              </div>
          `;

        document.querySelector(".progress-bar").style.display = "none";
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ–º–∏–Ω–∏—Ä—É—é—â–µ–≥–æ —Ç–∏–ø–∞
      function getDominantType(results) {
        if (!results) return "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";

        const maxCount = Math.max(
          results.A || 0,
          results.B || 0,
          results.C || 0,
          results.D || 0
        );
        const dominantTypes = [];

        if ((results.A || 0) === maxCount)
          dominantTypes.push("–ü—Ä–∞–∫—Ç–∏–∫-–¥–µ—è—Ç–µ–ª—å");
        if ((results.B || 0) === maxCount)
          dominantTypes.push("–ö–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä");
        if ((results.C || 0) === maxCount)
          dominantTypes.push("–¢–≤–æ—Ä–µ—Ü-–∏–Ω–æ–≤–∞—Ç–æ—Ä");
        if ((results.D || 0) === maxCount)
          dominantTypes.push("–ê–Ω–∞–ª–∏—Ç–∏–∫-—Å—Ç—Ä–∞—Ç–µ–≥");

        return dominantTypes.join(", ");
      }

      function prevQuestion() {
        if (currentQuestion > 0) {
          const question = questions[currentQuestion];
          if (question.selectedAnswer) {
            answers[question.selectedAnswer]--;
          }
          currentQuestion--;
          renderQuestion();
        }
      }

      function updateProgress() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
      }

      function highlightActivePage() {
        console.log("=== highlightActivePage started ===");
        const currentPath = window.location.pathname;
        console.log("currentPath:", currentPath);

        const navLinks = document.querySelectorAll(".nav-link");
        console.log("navLinks found:", navLinks.length);

        navLinks.forEach((link, index) => {
          let linkPath = link.getAttribute("href").split("?")[0];

          // –£–±–∏—Ä–∞–µ–º —Å–ª–µ—à–∏ –≤ –∫–æ–Ω—Ü–µ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
          linkPath = linkPath.replace(/\/+$/, "");
          const cleanCurrentPath = currentPath.replace(/\/+$/, "");

          console.log(`Link ${index}:`, {
            fullHref: link.getAttribute("href"),
            pathOnly: linkPath,
            currentPath: cleanCurrentPath,
            matches: linkPath === cleanCurrentPath,
          });

          if (linkPath === cleanCurrentPath) {
            console.log("ADDING active class to:", link.textContent);
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
        console.log("=== highlightActivePage finished ===");
      }
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("user_id");

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–∑ –ë–î —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä
        loadProgressFromServer(userId);
        highlightActivePage();
        renderQuestion();
      });
    </script>
  </body>
</html>
